<div class="flex flex-col gap-4">
  <!-- Filter -->
  <div class="flex items-center justify-between gap-4">
    <input pInputText type="text"
      class="w-full max-w-xs !bg-white !border !border-gray-300 !rounded !px-3 !py-2 !text-gray-700 !placeholder-gray-400"
      [placeholder]="'PRODUCT.FILTER_PLACEHOLDER' | translate" [value]="filterValue()"
      (input)="filterValue.set($any($event.target).value)" />
    <p-button [label]="'PRODUCT.ADD_BUTTON' | translate" icon="pi pi-plus" severity="primary" (onClick)="onAdd()" />
  </div>

  <!-- Table -->
  <p-table [value]="filteredProducts()" [paginator]="filteredProducts().length > 10" [rows]="10" [paginator]="true"
    dataKey="id" class="!bg-white !border !border-gray-200 !shadow-sm !rounded-lg">

    <ng-template pTemplate="header">
      <tr class="!bg-gray-700 !text-white !uppercase !text-sm !border-b !border-gray-700 !cursor-default !rounded">
        <th pSortableColumn="name" class="!px-4 !py-2 !bg-gray-900 !text-white !cursor-pointer !rounded-sm">
          {{ 'PRODUCT.NAME_COL' | translate }}
          <p-sortIcon field="name" />
        </th>
        <th pSortableColumn="sku" class="!px-4 !py-2 !bg-gray-900 !text-white !cursor-pointer !rounded-sm">
          {{ 'PRODUCT.SKU_COL' | translate }}
          <p-sortIcon field="sku" />
        </th>
        <th class="!px-4 !py-2 !bg-gray-900 !text-white !cursor-default !rounded-sm">
          {{ 'PRODUCT.CATEGORY_COL' | translate }}
        </th>
        <th class="!px-4 !py-2 !bg-gray-900 !text-white !cursor-default !rounded-sm">
          {{ 'PRODUCT.UNIT_COL' | translate }}
        </th>
        <th pSortableColumn="quantity" class="!px-4 !py-2 !bg-gray-900 !text-white !cursor-pointer !rounded-sm">
          {{ 'PRODUCT.STOCK_COL' | translate }}
          <p-sortIcon field="quantity" />
        </th>
        <th class="!px-4 !py-2 !bg-gray-900 !text-white !cursor-default !rounded-sm">
          {{ 'PRODUCT.STATUS_COL' | translate }}
        </th>
        <th class="!px-4 !py-2 !bg-gray-900 !text-white !cursor-default !rounded-sm">
          {{ 'PRODUCT.ACTIONS_COL' | translate }}
        </th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-product>
      <tr class="!bg-white !text-black !border-b !border-gray-200">
        <td class="!px-4 !py-2">{{ product.name }}</td>
        <td class="!px-4 !py-2">{{ product.sku }}</td>
        <td class="!px-4 !py-2">{{ product.category ?? '-' }}</td>
        <td class="!px-4 !py-2">{{ product.unit }}</td>
        <td class="!px-4 !py-2">{{ product.quantity }}</td>
        <td class="!px-4 !py-2">
          <span class="px-2 py-1 text-xs font-medium rounded-md text-white" [ngClass]="{
                  'bg-green-600': product.stockStatus === 'ok',
                  'bg-orange-500': product.stockStatus === 'low',
                  'bg-red-700': product.stockStatus === 'empty'
                }">
            {{ getStockLabel(product) }}
          </span>
        <td class="!px-4 !py-2">
          <div class="flex gap-2">
            <p-button icon="pi pi-pencil" [rounded]="true" severity="secondary" size="small"
              (onClick)="onEdit(product)" />
            <p-button icon="pi pi-trash" [rounded]="true" severity="danger" size="small"
              (onClick)="onDelete(product)" />
          </div>
        </td>
      </tr>
    </ng-template>

    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="7" class="!p-0">
          <div class="flex flex-col items-center justify-center py-16 text-center !bg-white w-full !border !border-gray-200 !shadow-sm" data-testid="empty-state">
            <!-- Icono grande -->
            <i class="pi pi-box text-6xl text-gray-300 mb-4"></i>

            <!-- TÃ­tulo -->
            <h2 class="text-xl font-semibold text-gray-500 mb-2">
              {{ 'PRODUCT.EMPTY_TITLE' | translate }}
            </h2>

            <!-- Mensaje -->
            <p class="text-gray-400">
              {{ 'PRODUCT.EMPTY_MESSAGE' | translate }}
            </p>
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

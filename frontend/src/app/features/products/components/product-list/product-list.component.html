<div class="flex flex-col gap-4">
  <!-- Filter -->
  <div class="flex items-center justify-between gap-4">
    <input
      pInputText
      type="text"
      class="w-full max-w-xs"
      [placeholder]="'PRODUCT.FILTER_PLACEHOLDER' | translate"
      [value]="filterValue()"
      (input)="filterValue.set($any($event.target).value)"
    />
    <p-button
      [label]="'PRODUCT.ADD_BUTTON' | translate"
      icon="pi pi-plus"
      (onClick)="onAdd()"
    />
  </div>

  <!-- Table -->
  <p-table
    [value]="filteredProducts()"
    [paginator]="filteredProducts().length > 10"
    [rows]="10"
    dataKey="id"
  >
    <ng-template pTemplate="header">
      <tr>
        <th pSortableColumn="name">{{ 'PRODUCT.NAME_COL' | translate }} <p-sortIcon field="name" /></th>
        <th pSortableColumn="sku">{{ 'PRODUCT.SKU_COL' | translate }} <p-sortIcon field="sku" /></th>
        <th>{{ 'PRODUCT.CATEGORY_COL' | translate }}</th>
        <th>{{ 'PRODUCT.UNIT_COL' | translate }}</th>
        <th pSortableColumn="quantity">{{ 'PRODUCT.STOCK_COL' | translate }} <p-sortIcon field="quantity" /></th>
        <th>{{ 'PRODUCT.STATUS_COL' | translate }}</th>
        <th>{{ 'PRODUCT.ACTIONS_COL' | translate }}</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-product>
      <tr [ngClass]="getRowClass(product)">
        <td>{{ product.name }}</td>
        <td>{{ product.sku }}</td>
        <td>{{ product.category ?? '-' }}</td>
        <td>{{ product.unit }}</td>
        <td>{{ product.quantity }}</td>
        <td>
          <p-tag
            [value]="getStockLabel(product)"
            [severity]="getStockSeverity(product)"
          />
        </td>
        <td>
          <div class="flex gap-2">
            <p-button
              icon="pi pi-pencil"
              [rounded]="true"
              severity="secondary"
              size="small"
              (onClick)="onEdit(product)"
            />
            <p-button
              icon="pi pi-trash"
              [rounded]="true"
              severity="danger"
              size="small"
              (onClick)="onDelete(product)"
            />
          </div>
        </td>
      </tr>
    </ng-template>

    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="7" class="py-12 text-center text-gray-500">
          {{ 'PRODUCT.EMPTY_MESSAGE' | translate }}
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

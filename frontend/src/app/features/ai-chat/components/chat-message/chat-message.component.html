<!-- User message -->
@if(isUser()) {
  <div data-testid="user-bubble" class="flex justify-end mb-3">
    <div class="max-w-[85%] bg-blue-600 text-white shadow-sm rounded-2xl rounded-tr-sm px-4 py-2">
      <p class="text-sm">{{ message().content | translate}}</p>
      <p class="text-xs text-blue-200 text-right mt-1">{{ formattedTime() }}</p>
    </div>
  </div>
}

<!-- Assistant message -->
@if(isAssistant()) {
  <div data-testid="assistant-bubble" class="flex gap-2 mb-3">
    <div class="w-7 h-7 rounded-full bg-primary-100 flex items-center justify-center flex-shrink-0">
      <i class="pi pi-robot text-primary-500 text-xs"></i>
    </div>

    <div class="max-w-[85%]">
      <div class="bg-white border border-gray-200 shadow-sm rounded-2xl rounded-tl-sm px-4 py-2">
        <p class="text-sm text-gray-800 whitespace-pre-line">{{ message().content }}</p>
      </div>

      @if(message().productLink) {
        <button data-testid="navigate-btn"
          class="mt-1 text-xs text-primary-500 hover:underline flex items-center gap-1"
          (click)="onNavigateTo()">
          <i class="pi pi-arrow-right text-xs"></i>
          {{ message().productLink!.label }}
        </button>
      }

      <p class="text-xs text-gray-400 mt-1">{{ formattedTime() }}</p>
    </div>
  </div>
}
